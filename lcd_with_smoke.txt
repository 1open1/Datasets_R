lcd with smoke
import RPi.GPIO as g
from time import sleep as s
from RPLCD.gpio import CharLCD

# GPIO Setup
g.setwarnings(False)
g.setmode(g.BOARD)

# Define gas sensor pin
GAS_SENSOR_PIN = 36  # Ensure the correct BOARD pin

g.setup(GAS_SENSOR_PIN, g.IN)  # Gas sensor as input

# LCD Setup
lcd = CharLCD(cols=20,
              rows=2,
              pin_rs=7,
              pin_e=11,
              pins_data=[40, 38, 36, 32],
              numbering_mode=g.BOARD)

print("Waiting for sensor to stabilize...")
s(5)  # Allow time for the sensor to warm up

try:
    last_state = None  # Store the last state to avoid unnecessary LCD updates

    while True:
        state = g.input(GAS_SENSOR_PIN)  # Read gas sensor
        
        if state != last_state:  # Update LCD only if state changes
            lcd.clear()  # Clear LCD before writing new text
            if state == 0:  # 0 = Gas detected (for MQ series sensors)
                print("Gas Detected!")
                lcd.cursor_pos = (0, 0)
                lcd.write_string("WARNING: GAS LEAK!")
            else:  # 1 = No gas detected
                print("No Gas")
                lcd.cursor_pos = (0, 0)
                lcd.write_string("No Gas - Safe :)")
            
            last_state = state  # Update last state
        
        s(2)  # Reduced delay for faster response

except KeyboardInterrupt:
    lcd.clear()
    g.cleanup()
